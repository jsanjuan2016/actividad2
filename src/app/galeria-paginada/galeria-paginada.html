<h2>Galer&iacute;a de im&aacute;genes</h2>

<div class="gallery-container">
  @for (photo of photos; track photo.url) {    
    <div class="photo-card">
      <a [routerLink]="['/photo', photo.id, photo.author | async]" 
         [queryParams]="{returnUrl: '/galeria-paginada', page: currentPage}" 
         rel="noopener noreferrer">
        <img [src]="photo.url" [alt]="photo.author | async" (error)="photo.url = `https://placehold.co/300x200/lightgrey/white?font=Lato&text=Id:${photo.id}+Imagen+no+existente+\\nen+picsum.photos`">
        <p>{{ (photo.author | async) ? (photo.author | async) : 'La imagen con ID ' + photo.id + ' no existe en picsum.photos' }}</p>
      </a> 
    </div>
  }
  @empty {
    <div aria-hidden="true"> No hay imágenes disponibles. </div>
  }
</div>

<!-- Controles de paginación -->
@if (totalPages > 1) {
  <div class="pagination-container">
    <div class="pagination">
      <button 
        class="pagination-btn" 
        [disabled]="!hasPreviousPage"
        (click)="goToFirstPage()"
        title="Primera página">
        &laquo;&laquo;
      </button>

      <button 
        class="pagination-btn" 
        [disabled]="!hasPreviousPage"
        (click)="goToPreviousPage()"
        title="Página anterior">
        &laquo;
      </button>

      @for (pageNum of pageNumbers; track pageNum) {
        <button 
          class="pagination-btn"
          [class.active]="pageNum === currentPage"
          (click)="goToPage(pageNum)">
          {{ pageNum }}
        </button>
      }

      <button 
        class="pagination-btn" 
        [disabled]="!hasNextPage"
        (click)="goToNextPage()"
        title="Página siguiente">
        &raquo;
      </button>

      <button 
        class="pagination-btn" 
        [disabled]="!hasNextPage"
        (click)="goToLastPage()"
        title="Última página">
        &raquo;&raquo;
      </button>
    </div>

    <div class="pagination-info">
      <span>Página {{ currentPage }} de {{ totalPages }} ({{ allPhotos.length }} imágenes total)</span>
    </div>
  </div>
}